"use strict";$(document).ready(function(){$("#regForm").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户账号必填"},stringLength:{min:6,max:18,message:"用户名长度必须在6~18位之间"}}},password1:{validators:{notEmpty:{message:"密码必填"},stringLength:{min:6,message:"密码至少6位"}}},password2:{validators:{notEmpty:{message:"确认密码必填"},identical:{field:"password1",message:"两次密码输入不一致"}}},realname:{validators:{notEmpty:{message:"真实姓名必填"}}},mobile:{validators:{notEmpty:{message:"手机号码必填"},regexp:{regexp:/^[1][3,4,5,7,8,9][0-9]{9}$/,message:"手机号码格式不正确。"}}},isAgree:{validators:{notEmpty:{message:"请阅读注册协议并同意"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),o=(s.data("bootstrapValidator"),s.serialize());console.log("发送的数据：",o),$.post("API/userAdd.php",o,function(e){console.log("服务器返回的结果：",e),$("#regLoginModal .modal-title").html("用户注册提示"),e.isSuccess?($("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-ok text-success'></span>"+e.msg+"等待 <span id='timeCount'>3</span>秒后自动跳转"),$num=3,$timeId=setInterval(function(){$num--,$("#timeCount").text($num),0==$num&&(clearInterval($timeId),location.href="login.php")},1e3),$("#regLoginModal").modal("show")):($("#regLoginModal .modal-body").html("<span class='glyphicon glyphicon-remove'></span>"+e.msg),$("#regLoginModal").modal("show"),console.log(e.msg))},"json")}),$("#loginForm").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名验证失败",validators:{notEmpty:{message:"用户名不能为空"},stringLength:{min:6,max:18,message:"用户名长度必须在6~18位之间"}}},password1:{validators:{notEmpty:{message:"密码必须填写"},stringLength:{min:6,message:"密码长度必须大于6位"}}}}}).on("success.form.bv",function(e){e.preventDefault();var s=$(e.target),o=(s.data("bootstrapValidator"),s.serialize());$.post("API/checkLogin.php",o,function(e){e.isSuccess?(alert("登录成功"),location.href="personal.php"):alert(e.msg)},"json")})});